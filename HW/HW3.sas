/* 14.4 */

DATA ONE TWO THREE;
	DO I = 1 TO 5;
		DO TIME = 1 TO 3;
		DOB = INT(10000 + RANUNI(0) * 365);
		IF TIME = 1 THEN OUTPUT ONE;
		ELSE IF TIME = 2 THEN OUTPUT TWO;
		ELSE IF TIME = 3 THEN OUTPUT THREE;
		END;
	END;
	DROP I;
	FORMAT DOB DATE9.;
RUN;

DATA MER;
 MERGE ONE TWO THREE;
 BY TIME;
RUN;

PROC PRINT DATA = mer;
RUN;

/* 15.2 */
	 
DATA TEMP (DROP = I);
	INPUT TF1-TF10;
	ARRAY FAH (10) TF1 TF2 TF3 TF4 TF5 TF6 TF7 TF8 TF9 TF10;
	ARRAY CEL (10) TC1 - TC10;
	DO I = 1 TO 10;
			CEL(I) = 5/9 * (FAH(I) - 32);	
	END;
	
DATALINES;
32 212 -4 10 20 30 40 50 60 70 
-10 0 10 20 30 40 50 60 70 80
;

RUN;

PROC PRINT DATA = TEMP;
RUN;

/* 15.4*/

DATA MIXED1 (DROP = I);
	INFORMAT A1-A3 B C $5.;
	INPUT X1-X3 Y Z A1-A3 B C;
	ARRAY NUM (5) X1 X2 X3 Y Z;
	ARRAY LOG1 (5) LX1 LX2 LX3 LY LZ;
	DO I = 1 TO 5;
		LOG1(I) = LOG(NUM(I));
	END;
	ARRAY STRING (5) A1 A2 A3 B C;
	DO I = 1 TO 5;
		IF STRING(I) = "?" THEN STRING(I) = " ";
	END;
DATALINES;
10 20 30 40 50 ONE TWO THREE ? ?
11 22 33 44 55 ? LLL MMM ? VVV
;	
RUN;

PROC PRINT DATA = mixed1;
RUN;

/* 15.8 EXTRA CREDIT */

DATA EXPER;
	INPUT TIME0-TIME4;
	ARRAY SECONDS (5) TIME0-TIME4;
	ARRAY MINUTES (5) MINUTE0-MINUTE4;
	DO I = 1 TO 5;
		MINUTES(I) = ROUND(SECONDS(I)/60,0.1);
	END;
DATALINES;
100 200 300 400 500
55 110 130 150 170
;
RUN;

PROC PRINT DATA = EXPER (DROP = I);
RUN;

/* 16.2 */

* Creating FROG dataset;

DATA FROG;
	INPUT ID X1-X5 Y1-Y5;
DATALINES;
01 4 5 4 7 3 1 7 3 6 8
02 8 7 8 6 7 5 4 3 5 6
;
RUN;

PROC TRANSPOSE DATA = FROG OUT = OUTFROGX prefix= X;
	 by id;
	 var X1-X5;
RUN;

PROC TRANSPOSE DATA = FROG OUT = OUTFROGY prefix= Y;
	 by id;
	 var Y1-Y5;
RUN;

DATA COMBINED;
	MERGE OUTFROGX (rename=(X1=X)) OUTFROGY (rename=(Y1=Y));
	BY ID;
	TIME = compress(_NAME_, , 'a');
	DROP _NAME_;
RUN;

PROC PRINT DATA = COMBINED;
	 VAR ID TIME X Y;
RUN;

/* 16.4 */

DATA THIN (DROP = TIME);
	INPUT ID $ TIME X @@;
DATALINES;
001 1 10 001 2 12 001 3 15
004 1 17
003 1 14 003 2 18 003 3 22 003 4 28
002 1 18 004 2 28
;
RUN;

PROC SORT DATA = THIN;
	BY ID X;
RUN;

PROC TRANSPOSE DATA = THIN OUT = LONG;
	 BY ID;
RUN;

PROC PRINT DATA = LONG SPLIT = " " ;
	LABEL COL1 = "X1" COL2 = "X2" COL3 = "X3" COL4 = "X4";
	VAR ID COL1 COL2 COL3 COL4;
RUN;


	


